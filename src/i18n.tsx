
import React, { createContext, useContext, useState, ReactNode } from 'react';

// --- 1. å®šç¾©å­—å…¸æª” (Dictionary) ---
const resources = {
  'zh-TW': {
    // --- Common / Generic ---
    "app_name": "è¬ç”¨æ¡ŒéŠè¨ˆåˆ†æ¿",
    "confirm": "ç¢ºå®š",
    "cancel": "å–æ¶ˆ",
    "delete": "åˆªé™¤",
    "save": "å„²å­˜",
    "edit": "ç·¨è¼¯",
    "copy": "è¤‡è£½",
    "download": "ä¸‹è¼‰",
    "share": "åˆ†äº«",
    "close": "é—œé–‰",
    "back": "è¿”å›",
    "reset": "é‡ç½®",
    "restore": "é‚„åŸ",
    "loading": "è¼‰å…¥ä¸­...",
    "success": "æˆåŠŸ",
    "failed": "å¤±æ•—",
    "warning": "è­¦å‘Š",
    "error": "éŒ¯èª¤",
    "info": "è³‡è¨Š",
    "none": "ç„¡",
    "player": "ç©å®¶",
    "total": "ç¸½åˆ†",
    "winner": "è´å®¶",
    "search": "æœå°‹",
    "filter": "ç¯©é¸",
    "ok": "å¥½",
    "understand": "æˆ‘ç­è§£äº†",
    
    // --- Dashboard ---
    "dash_search_placeholder": "æœå°‹éŠæˆ²...",
    "dash_history_search_placeholder": "æœå°‹æ­·å²ç´€éŒ„...",
    "dash_active_sessions": "é€²è¡Œä¸­éŠæˆ²",
    "dash_clear_all": "å…¨éƒ¨æ¸…ç©º",
    "dash_pinned": "å·²é‡˜é¸",
    "dash_my_library": "æˆ‘çš„éŠæˆ²åº«",
    "dash_builtin_library": "å…§å»ºéŠæˆ²åº«",
    "dash_new_games_found": "ç™¼ç¾ {count} å€‹æ–°éŠæˆ²",
    "dash_install_app": "å®‰è£ App",
    "dash_no_records": "æ²’æœ‰ç´€éŒ„",
    "dash_no_records_hint": "å¦‚æœæ˜¯æœå°‹çµæœç‚ºç©ºï¼Œè«‹å˜—è©¦å…¶ä»–é—œéµå­—ã€‚",
    "dash_no_templates": "é‚„æ²’æœ‰å»ºç«‹éŠæˆ²æ¨¡æ¿",
    "dash_no_search_results": "æ²’æœ‰ç¬¦åˆæœå°‹çš„éŠæˆ²",
    "dash_search_result_count": "æœå°‹çµæœï¼š{count} ç­†",
    "dash_search_result_limit": "é¡¯ç¤ºæœ€è¿‘ 100 ç­†",
    "dash_add_new": "æ–°å¢",
    "dash_import_export": "è³‡æ–™ç®¡ç†",
    "dash_cloud_sync": "åŒæ­¥èˆ‡å‚™ä»½",
    "dash_disconnect": "ç™»å‡º Google Drive",
    
    // --- Confirmations (Dashboard) ---
    "confirm_delete_template_title": "ç¢ºå®šåˆªé™¤æ­¤æ¨¡æ¿ï¼Ÿ",
    "confirm_delete_template_msg": "æ­¤å‹•ä½œå°‡ç„¡æ³•å¾©åŸã€‚",
    "confirm_delete_session_title": "ç¢ºå®šåˆªé™¤æ­¤é€²è¡Œä¸­çš„éŠæˆ²å—ï¼Ÿ",
    "confirm_delete_session_msg": "æ‚¨å°‡éºå¤±ç›®å‰çš„è¨ˆåˆ†é€²åº¦ã€‚",
    "confirm_delete_history_title": "ç¢ºå®šåˆªé™¤æ­¤ç´€éŒ„ï¼Ÿ",
    "confirm_clear_all_sessions_title": "æ¸…ç©ºæ‰€æœ‰é€²è¡Œä¸­éŠæˆ²ï¼Ÿ",
    "confirm_clear_all_sessions_msg": "æ­¤å‹•ä½œå°‡åˆªé™¤æ‰€æœ‰æš«å­˜é€²åº¦ï¼Œç„¡æ³•å¾©åŸã€‚",
    "confirm_clear_all": "ç¢ºèªæ¸…ç©º",
    "confirm_restore_title": "é‚„åŸé è¨­å€¼ï¼Ÿ",
    "confirm_restore_msg": "ç›®å‰çš„ä¿®æ”¹å°‡æœƒè‡ªå‹•å‚™ä»½åˆ°ã€Œæˆ‘çš„éŠæˆ²åº«ã€ï¼Œä¸¦é‚„åŸè‡³åˆå§‹è¨­å®šã€‚",
    "confirm_discard_title": "ç¢ºå®šæ¨æ£„æœ¬å±€ï¼Ÿ",
    "confirm_discard_msg": "æ­¤å‹•ä½œå°‡å®Œå…¨åˆªé™¤æœ¬å±€éŠæˆ²çš„æ‰€æœ‰ç´€éŒ„ï¼ˆåŒ…å«ç…§ç‰‡ï¼‰ï¼Œä¸”ç„¡æ³•å¾©åŸã€‚",
    
    // --- Messages (Dashboard) ---
    "msg_json_copied": "JSON å·²è¤‡è£½",
    "msg_cloud_connect_first": "è«‹å…ˆé»æ“Šä¸Šæ–¹é›²ç«¯æŒ‰éˆ•å•Ÿç”¨é€£ç·š",
    "msg_read_template_failed": "è®€å–æ¨¡æ¿å¤±æ•—",
    "msg_copy_created": "å·²å»ºç«‹å‰¯æœ¬",

    // --- Game Card Actions ---
    "card_resume": "ç¹¼çºŒéŠæˆ²",
    "card_start_new": "é–‹å§‹æ–°éŠæˆ²",
    "card_delete": "åˆªé™¤",
    "card_pin": "é‡˜é¸",
    "card_unpin": "å–æ¶ˆé‡˜é¸",
    "card_copy_json": "è¤‡è£½ JSON",
    "card_cloud_backup": "å‚™ä»½åˆ°é›²ç«¯",
    "card_backup_hint": "æœ‰è®Šæ›´ï¼é»æ“Šå‚™ä»½åˆ° Google Drive",
    "card_create_copy": "å»ºç«‹å‰¯æœ¬",
    "card_restore_builtin": "å‚™ä»½ä¸¦é‚„åŸ",
    "card_img_ready": "èƒŒæ™¯åœ–å·²å°±ç·’",
    "card_img_missing": "éœ€ä¸‹è¼‰æˆ–è¨­å®šèƒŒæ™¯åœ–",

    // --- Cloud Manager ---
    "cloud_title": "é›²ç«¯å‚™ä»½",
    "cloud_connect_title": "å•Ÿç”¨å®Œæ•´åŠŸèƒ½",
    "cloud_connect_desc": "é€£ç·š Google Drive ä»¥è§£é–é›²ç«¯åŒæ­¥èˆ‡è‡ªå‹•å‚™ä»½ã€‚",
    "cloud_benefit_1_title": "è‡ªå‹•é›²ç«¯å‚™ä»½",
    "cloud_benefit_1_desc": "ç¢ºä¿æ‚¨çš„è¨ˆåˆ†ç´€éŒ„èˆ‡è‡ªè¨‚æ¨¡æ¿æ°¸ä¸éºå¤±ã€‚",
    "cloud_benefit_2_title": "è·¨è£ç½®åŒæ­¥",
    "cloud_benefit_2_desc": "åœ¨æ‰‹æ©Ÿã€å¹³æ¿æˆ–é›»è…¦é–“ç„¡ç¸«åˆ‡æ›é€²åº¦ã€‚",
    "cloud_benefit_3_title": "å°ˆå±¬æª”æ¡ˆç©ºé–“",
    "cloud_benefit_3_desc": "åƒ…å­˜å–æœ¬ App å»ºç«‹çš„å‚™ä»½æª”ï¼Œä¿éšœéš±ç§ã€‚",
    "cloud_btn_connect": "ç«‹å³é€£ç·š",
    "cloud_tab_templates": "éŠæˆ²åº«",
    "cloud_tab_active": "é€²è¡Œä¸­",
    "cloud_tab_history": "æ­·å²",
    "cloud_tab_files": "é›²ç«¯æª”æ¡ˆ",
    "cloud_tab_trash": "åƒåœ¾æ¡¶",
    "cloud_empty_trash": "æ¸…ç©ºåƒåœ¾æ¡¶",
    "cloud_empty_list": "é›²ç«¯æ²’æœ‰æ‰¾åˆ°å‚™ä»½æª”æ¡ˆ",
    "cloud_empty_trash_list": "åƒåœ¾æ¡¶æ˜¯ç©ºçš„",
    "cloud_download_restore": "ä¸‹è¼‰ä¸¦é‚„åŸ",
    "cloud_restore": "é‚„åŸ",
    "cloud_delete_perm": "æ°¸ä¹…åˆªé™¤",
    "cloud_confirm_delete_title": "æ°¸ä¹…åˆªé™¤å‚™ä»½ï¼Ÿ",
    "cloud_confirm_delete_msg": "ç¢ºå®šè¦æ°¸ä¹…åˆªé™¤ã€Œ{name}ã€å—ï¼Ÿæ­¤å‹•ä½œç„¡æ³•å¾©åŸã€‚",
    "cloud_confirm_empty_title": "æ¸…ç©ºåƒåœ¾æ¡¶ï¼Ÿ",
    "cloud_confirm_empty_msg": "ç¢ºå®šè¦æ°¸ä¹…åˆªé™¤æ‰€æœ‰åƒåœ¾æ¡¶ä¸­çš„æª”æ¡ˆå—ï¼Ÿæ­¤å‹•ä½œç„¡æ³•å¾©åŸã€‚",
    "cloud_confirm_logout_title": "ç™»å‡º Google Driveï¼Ÿ",
    "cloud_confirm_logout_msg": "ç™»å‡ºå¾Œå°‡ç„¡æ³•è‡ªå‹•å‚™ä»½ã€‚æ‚¨çš„æª”æ¡ˆä»æœƒä¿ç•™åœ¨é›²ç«¯ã€‚",
    
    // --- Sync Dashboard ---
    "sync_title": "è³‡æ–™åŒæ­¥ä¸­å¿ƒ",
    "sync_backup_title": "å‚™ä»½è‡³é›²ç«¯",
    "sync_backup_desc": "å°‡æœ¬æ©Ÿçš„è³‡æ–™ä¸Šå‚³è‡³ Google Drive",
    "sync_restore_title": "å¾é›²ç«¯é‚„åŸ",
    "sync_restore_desc": "å°‡ Google Drive çš„è³‡æ–™ä¸‹è¼‰è‡³æœ¬æ©Ÿ",
    "sync_btn_upload": "é–‹å§‹ä¸Šå‚³",
    "sync_btn_download": "é–‹å§‹ä¸‹è¼‰",
    "sync_status_processing": "è™•ç†ä¸­...",
    "sync_status_success": "æˆåŠŸ",
    "sync_status_skipped": "ç•¥é (æœ€æ–°)",
    "sync_status_failed": "å¤±æ•—",
    "sync_error_details": "éŒ¯èª¤è©³æƒ…",
    "sync_msg_limit": "é›²ç«¯åƒ…ä¿ç•™æœ€æ–°çš„ 20 ç­†é€²è¡Œä¸­éŠæˆ²ï¼ŒèˆŠæª”å°‡è‡ªå‹•åˆªé™¤ã€‚",
    "sync_msg_newer": "è‹¥é›²ç«¯å·²æœ‰è¼ƒæ–°ç‰ˆæœ¬ï¼Œå°‡è‡ªå‹•ç•¥éã€‚",
    "sync_msg_restore_warn": "æ­¤å‹•ä½œå°‡æœƒæŠŠé›²ç«¯è³‡æ–™å¯«å…¥æœ¬æ©Ÿã€‚ä¸åŒ…å«é€²è¡Œä¸­éŠæˆ²ï¼ˆè‹¥éœ€å–å›æš«å­˜æª”ï¼Œè«‹è‡³ã€Œé›²ç«¯å‚™ä»½ç®¡ç†ã€æ‰‹å‹•ä¸‹è¼‰ï¼‰ã€‚",

    // --- Game Setup Modal ---
    "setup_last_played": "ä¸Šæ¬¡ï¼š",
    "setup_resume_btn": "ç¹¼çºŒ\néŠæˆ²",
    "setup_or_new": "æˆ–æ˜¯ é–‹å§‹æ–°éŠæˆ²",
    "setup_time": "éŠæˆ²é–‹å§‹æ™‚é–“",
    "setup_rule": "å‹åˆ©æ¢ä»¶",
    "setup_players": "ç©å®¶äººæ•¸",
    "setup_reset_record": "é‡ç½®è¨˜éŒ„",
    "setup_and": "ä¸¦",
    "setup_start_btn": "é–‹å§‹è¨ˆåˆ†",
    "rule_highest": "ç«¶çˆ­ï¼šæœ€é«˜åˆ†è´",
    "rule_lowest": "ç«¶çˆ­ï¼šæœ€ä½åˆ†è´",
    "rule_coop": "åˆä½œæ¨¡å¼",
    "rule_comp_no_score": "ç«¶çˆ­(ä¸è¨ˆå‹è² )",
    "rule_coop_no_score": "åˆä½œ(ä¸è¨ˆå‹è² )",

    // --- Session View ---
    "session_edit_title_placeholder": "è¼¸å…¥æ¨™é¡Œ",
    "session_lock_edit": "é–å®šç·¨è¼¯ (åˆ‡æ›è‡³ä½¿ç”¨æ¨¡å¼)",
    "session_unlock_edit": "è§£é–ç·¨è¼¯ (åˆ‡æ›è‡³ç·¨è¼¯æ¨¡å¼)",
    "session_download_bg": "ä¸‹è¼‰é›²ç«¯èƒŒæ™¯åœ–",
    "session_reset_confirm_title": "ç¢ºå®šé‡ç½®ï¼Ÿ",
    "session_reset_confirm_msg": "æ­¤å‹•ä½œå°‡æ¸…ç©ºæ‰€æœ‰å·²è¼¸å…¥çš„åˆ†æ•¸ï¼Œä¸”ç„¡æ³•å¾©åŸã€‚",
    "session_delete_col_title": "ç¢ºå®šåˆªé™¤æ­¤é …ç›®ï¼Ÿ",
    "session_delete_col_msg": "åˆªé™¤å¾Œï¼Œæ‰€æœ‰ç©å®¶åœ¨è©²é …ç›®çš„åˆ†æ•¸å°‡æœƒéºå¤±ã€‚",
    "session_upload_modal_title": "è¨­å®šè¨ˆåˆ†ç´™èƒŒæ™¯",
    "session_upload_modal_desc": "æ­¤æ¨¡æ¿å·²åŒ…å«æ¡†ç·šè¨­å®šã€‚",
    "session_upload_modal_cloud_btn": "å¾é›²ç«¯ä¸‹è¼‰",
    "session_upload_modal_connect_btn": "é€£ç·šä¸¦ä¸‹è¼‰",
    "session_upload_modal_camera": "æ‹æ”æ–°ç…§ç‰‡",
    "session_upload_modal_gallery": "å¾ç›¸ç°¿ä¸Šå‚³",
    "session_upload_modal_remove": "ç§»é™¤è¨ˆåˆ†ç´™è¿”å›æ¨™æº–ä»‹é¢",
    "session_exit_title": "å³å°‡è¿”å›ç›®éŒ„",
    "session_exit_msg": "éŠæˆ²çµæŸäº†å—ï¼Ÿ",
    "session_btn_draft": "æš«å­˜éŠæˆ² (ç¨å¾Œå†ç©)",
    "session_btn_finish": "çµæŸéŠæˆ² (å„²å­˜ç´€éŒ„)",
    "session_discard": "æ¨æ£„",

    // --- Input Panel ---
    "input_edit_player": "ç·¨è¼¯ç©å®¶",
    "input_total_adjust": "ç¸½åˆ†ä¿®æ­£",
    "input_clear": "æ¸…é™¤",
    "input_reset": "é‡ç½®",
    "input_next": "ä¸‹ä¸€é …",
    "input_tie_breaker": "æ‰“ç ´å¹³æ‰‹",
    "input_force_loss": "å¼·åˆ¶è½æ•—",
    "input_auto_calc": "è‡ªå‹•è¨ˆç®—",
    "input_auto_desc": "æ­¤æ¬„ä½ç”±å…¬å¼è‡ªå‹•ç”¢ç”Ÿçµæœã€‚æ‚¨ç„¡éœ€æ‰‹å‹•è¼¸å…¥æ•¸å€¼ã€‚",
    "input_list_menu": "åˆ—è¡¨é¸å–®",
    "input_calc_mode": "æ•¸å€¼é‹ç®—",
    "input_rounding": "å°æ•¸è™•ç†",
    "input_not_scored": "æ­¤æ¬„ä½ä¸è¨ˆå…¥ç¸½åˆ†",
    "input_prod_title": "ä¹˜ç©è¼¸å…¥",
    "input_sum_title": "åˆ†é …ç´¯åŠ ",
    "input_lookup_title": "ç¯„åœæŸ¥è¡¨",
    "input_fixed_score": "å›ºå®šåˆ†æ•¸",
    "input_no_rule": "ç„¡è¦å‰‡",
    "input_btn_enter": "è¼¸å…¥",

    // --- Player Editor ---
    "player_placeholder": "è¼¸å…¥åç¨±",
    "player_color": "é¡è‰²",
    "player_no_color": "ç„¡è‰²",
    "player_history": "æ­·å²ç´€éŒ„",
    "player_no_history": "ç„¡ç´€éŒ„",
    "player_set_starter": "è¨­ç‚ºèµ·å§‹",
    "player_is_starter": "èµ·å§‹ç©å®¶",

    // --- Column Config Editor ---
    "col_edit_title": "ç·¨è¼¯é …ç›®",
    "col_edit_subtitle": "è¨­å®šè¨ˆåˆ†è¦å‰‡",
    "col_name": "æ¬„ä½åç¨±",
    "col_advanced": "é€²éšè¨­å®š",
    "col_help_default": "é»æŒ‰ä¸Šæ–¹æŒ‰éˆ•å¯æŸ¥çœ‹åŠŸèƒ½èªªæ˜",
    "col_help_scoring_on": "é–‹å•Ÿï¼šæ•¸å€¼å°‡è¨ˆå…¥ç¸½åˆ†",
    "col_help_scoring_off": "é—œé–‰ï¼šåƒ…ä½œè¨˜éŒ„ï¼Œä¸åŠ ç¸½",
    "col_help_display": "åˆ‡æ›ï¼šç¨ç«‹ä¸€åˆ— / ç–ŠåŠ æ–¼ä¸Šä¸€åˆ—",
    "col_help_crop": "è¨­å®šæ­¤æ¬„ä½åœ¨èƒŒæ™¯åœ–ä¸Šçš„é¡¯ç¤ºä½ç½®",
    "col_scoring_on": "è¨ˆåˆ†ä¸­",
    "col_scoring_off": "ä¸è¨ˆåˆ†",
    "col_crop": "æ¡†é¸å€åŸŸ",
    "col_cropped": "å·²æ¡†é¸",
    "col_display_row": "åˆ—è¡¨",
    "col_display_overlay": "é‡ç–Š",
    "col_color": "ä»£è¡¨è‰²",
    "col_btn_save": "å„²å­˜è¨­å®š",
    "col_tab_basic": "æ•¸å€¼é‹ç®—",
    "col_tab_select": "åˆ—è¡¨é¸å–®",
    "col_tab_mapping": "ç¯„åœæŸ¥è¡¨",
    "col_tab_auto": "è‡ªå‹•",
    
    // Tab Basic
    "col_mode_std": "æ•¸å­— / å›ºå®šå€ç‡",
    "col_mode_std_desc": "å–®ä½ Ã— å¸¸æ•¸",
    "col_mode_prod": "è¼¸å…¥å…©æ•¸ç›¸ä¹˜",
    "col_mode_prod_desc": "A Ã— B",
    "col_unit": "å–®ä½",
    "col_input_val": "è¼¸å…¥å€¼",
    "col_score": "å¾—åˆ†",
    "col_prod_unit_title": "ä¹˜ç©å–®ä½",
    "col_prod_unit_a": "A çš„å–®ä½",
    "col_prod_unit_b": "B çš„å–®ä½",
    "col_sum_parts": "å•Ÿç”¨åˆ†é …ç´¯åŠ ",
    "col_rounding_enable": "å•Ÿç”¨å°æ•¸é»é€²ä½/æ¨å»",
    "col_round_floor": "ç„¡æ¢ä»¶æ¨å»",
    "col_round_ceil": "ç„¡æ¢ä»¶é€²ä½",
    "col_round_round": "å››æ¨äº”å…¥",
    "col_display_in_grid": "æ ¼å…§é¡¯ç¤ºæ–¹å¼",
    "col_display_std": "æ¨™æº–",
    "col_display_total": "åƒ…é¡¯ç¤ºç¸½å’Œ",
    "col_display_parts": "åƒ…é¡¯ç¤ºåˆ†é …",
    "col_input_method": "è¼¸å…¥æ–¹å¼",
    "col_use_pad": "ä½¿ç”¨æŒ‰éˆ•è¼¸å…¥é¢æ¿",
    
    // Tab Select (Quick Actions)
    "col_render_mode": "é¡¯ç¤ºæ¨¡å¼",
    "col_render_std": "æ¨™æº–",
    "col_render_val": "åƒ…é¡¯ç¤ºæ•¸å€¼",
    "col_render_label": "åƒ…é¡¯ç¤ºæ¨™ç±¤",
    "col_select_desc": "å»ºç«‹å›ºå®šçš„é¸é …åˆ—è¡¨ï¼Œé»æŒ‰é¸æ“‡å°æ‡‰åˆ°åˆ†æ•¸ã€‚",
    "col_buttons": "æŒ‰éˆ•åˆ—è¡¨",
    "col_btn_cols": "æŒ‰éˆ•æ¬„æ•¸",
    "col_btn_add": "æ–°å¢æŒ‰éˆ•",
    "col_btn_mode_list_hint": "ç›®å‰ç‚ºã€Œæ¸…å–®æ¨¡å¼ã€ï¼šæŒ‰éˆ•å°‡æ©«å‘æ’åˆ—ï¼Œæœ€é©åˆé–±è®€ã€‚",
    "col_btn_mode_grid_hint": "ç›®å‰ç‚ºã€Œç¶²æ ¼æ¨¡å¼ã€ï¼šæŒ‰éˆ•å°‡ç¸±å‘å †ç–Šï¼Œç¯€çœç©ºé–“ã€‚",
    "col_btn_modifier_hint": "åˆ‡æ›ç‚ºé¡å¤–æ·»åŠ éµ",
    "col_btn_color_hint": "è¨­å®šæŒ‰éˆ•é¡è‰²",
    "col_btn_label_ph": "æ¨™ç±¤ (å¯æ›è¡Œ)",
    "col_btn_reset_color": "é‡ç½®ç‚ºé è¨­",

    // Tab Mapping
    "col_mapping_desc": "è¨­å®šæ•¸å€¼å€é–“èˆ‡å°æ‡‰åˆ†æ•¸ï¼Œæˆ–æ˜¯åœ¨å€é–“å…§æ¯aåŠ bã€‚",
    "col_mapping_min": "æœ€å°",
    "col_mapping_max": "æœ€å¤§",
    "col_mapping_next": "NEXT",
    "col_mapping_mode_linear": "æ¨¡å¼ï¼šæ¯aåŠ b",
    "col_mapping_mode_fixed": "æ¨¡å¼ï¼šå›ºå®šåˆ†æ•¸",
    "col_mapping_lock_hint": "é¦–é …å¿…é ˆç‚ºå›ºå®šåˆ†æ•¸ï¼ˆåŸºæº–ï¼‰",
    "col_mapping_per": "æ¯",
    "col_mapping_add": "åŠ ",
    "col_mapping_val": "æ•¸å€¼",
    "col_add_interval": "æ–°å¢å€é–“",

    // Tab Auto
    "col_auto_title": "é«˜ç´šè‡ªå‹•è¨ˆç®—",
    "col_auto_desc": "ä½¿ç”¨ x1, x2... ä»£è¡¨ä¾†æºæ¬„ä½ï¼Œf1(...), f2(...) ä»£è¡¨æŸ¥è¡¨è¦å‰‡ã€‚",
    "col_auto_formula": "è¨ˆç®—å…¬å¼",
    "col_auto_vars": "è®Šæ•¸å°æ‡‰",
    "col_auto_player_count": "ğŸ‘¥ ç©å®¶äººæ•¸ (æœ¬å±€è¨­å®š)",
    "col_auto_score_items": "è¨ˆåˆ†é …ç›®",
    "col_auto_mode": "å–å€¼æ¨¡å¼",
    "col_auto_mode_val": "æ•¸å€¼ (é è¨­)",
    "col_auto_mode_rank_score": "åˆ†æ•¸æ’å",
    "col_auto_mode_rank_player": "ç©å®¶æ’å",
    "col_auto_mode_tie": "å¹³æ‰‹äººæ•¸",
    "col_auto_rank_score_desc": "åˆ†æ•¸ç›¸åŒè€…ä¸¦åˆ—ï¼Œåæ¬¡é€£çºŒ",
    "col_auto_rank_player_desc": "åˆ†æ•¸ç›¸åŒè€…ä¸¦åˆ—ï¼Œä¸‹ä¸€åæ¬¡è·³è™Ÿ",
    "col_auto_tie_desc": "è¨ˆç®—èˆ‡è‡ªå·±åŒåˆ†çš„äººæ•¸",
    "col_auto_funcs": "å‡½æ•¸è¦å‰‡å®šç¾©",
    "col_auto_no_vars": "å…¬å¼ä¸­æ²’æœ‰è®Šæ•¸",
    "col_auto_no_funcs": "å…¬å¼ä¸­æ²’æœ‰ä½¿ç”¨å‡½æ•¸ (å¦‚ f1, f2)",
    "col_auto_rules_count": "æ¢è¦å‰‡",
    "col_auto_err_empty": "è«‹è¼¸å…¥å…¬å¼",
    "col_auto_err_invalid_char": "éæ³•ç¬¦è™Ÿ",
    "col_auto_err_invalid_result": "ç„¡æ•ˆçµæœ",
    "col_auto_err_syntax": "å…¬å¼èªæ³•éŒ¯èª¤ï¼Œè«‹æª¢æŸ¥ç¬¦è™Ÿèˆ‡æ‹¬è™Ÿ",

    // Layout Editor
    "layout_editor_title": "è¨­å®šé¡¯ç¤ºå€åŸŸ",
    "layout_editor_desc": "åœ¨ä¸‹æ–¹å€åŸŸæ¡†é¸å‡ºåˆ†æ•¸é¡¯ç¤ºçš„ä½ç½®",
    "layout_editor_hint": "(è‹¥æœªè¨­å®šï¼Œå‰‡é è¨­ç‚ºç½®ä¸­é¡¯ç¤º)",

    // --- Share Menu ---
    "share_screenshot": "é è¦½æˆªåœ–",
    "share_gallery": "ç…§ç‰‡åœ–åº«",
    "share_photo_count": "ç›®å‰ {count} å¼µç…§ç‰‡",
    "share_set_bg": "è¨­å®šè¨ˆåˆ†ç´™èƒŒæ™¯",

    // --- Screenshot Modal ---
    "ss_title": "åˆ†äº«çµæœ",
    "ss_full": "å®Œæ•´ç‰ˆ",
    "ss_simple": "ç°¡æ½”ç‰ˆ",
    "ss_generating": "æ­£åœ¨ç¹ªè£½åœ–ç‰‡...",
    "ss_copy": "è¤‡è£½",
    "ss_download": "ä¸‹è¼‰",
    "ss_share": "åˆ†äº«",
    "ss_copy_success": "å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿",
    "ss_download_start": "ä¸‹è¼‰å·²é–‹å§‹",
    "ss_share_fail": "æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´ç›´æ¥åˆ†äº«åœ–ç‰‡",

    // --- Photo Gallery ---
    "gallery_title": "éŠæˆ²ç…§ç‰‡åº«",
    "gallery_upload": "ä¸Šå‚³",
    "gallery_camera": "æ‹ç…§",
    "gallery_loading": "è¼‰å…¥ç…§ç‰‡ä¸­...",
    "gallery_empty": "å°šç„¡ç…§ç‰‡",
    "gallery_empty_hint": "é»æ“Šå³ä¸Šè§’çš„æŒ‰éˆ•ä¾†æ–°å¢é€™å ´éŠæˆ²çš„ç²¾å½©æ™‚åˆ»ï¼",
    "gallery_delete_confirm_title": "åˆªé™¤ç…§ç‰‡ï¼Ÿ",
    "gallery_delete_confirm_msg": "ç¢ºå®šè¦åˆªé™¤é€™å¼µç…§ç‰‡å—ï¼Ÿæ­¤å‹•ä½œç„¡æ³•å¾©åŸã€‚",
    "gallery_generating_overlay": "æ­£åœ¨åˆæˆè¨ˆåˆ†è¡¨...",
    "gallery_toggle_score": "é¡¯ç¤ºåˆ†æ•¸",
    "gallery_hide_score": "éš±è—åˆ†æ•¸",

    // --- History Review ---
    "history_review_subtitle": "æ­·å²å›é¡§",
    "history_edit_info": "ç·¨è¼¯ç´€éŒ„è³‡è¨Š",
    "history_share_photo": "åˆ†äº«/ç…§ç‰‡",
    "history_settings_title": "è©³ç´°è³‡è¨Šè¨­å®š",
    "history_game_name": "éŠæˆ²åç¨±",
    "history_start_time": "é–‹å§‹æ™‚é–“",
    "history_end_time": "çµæŸæ™‚é–“",
    "history_location": "åœ°é»",
    "history_location_ph": "ä¾‹å¦‚ï¼šå®¶è£¡ã€æ¡ŒéŠåº—...",
    "history_rule": "ç«¶çˆ­ / åˆä½œæ¨¡å¼",
    "history_rule_warn": "* æ­¤è¨­å®šå°‡æ”¹è®Šæ­·å²ç´€éŒ„ä¸­çš„è¦å‰‡æ¨™è¨˜ (ä¸æœƒè‡ªå‹•é‡ç®—è´å®¶)",
    "history_note": "ç­†è¨˜ / å‚™è¨»",
    "history_note_ph": "ç´€éŒ„é€™å ´éŠæˆ²çš„è¶£äº‹ã€æˆ°è¡“æˆ–å¿ƒå¾—...",
    "history_raw_data": "æª¢è¦–åŸå§‹è³‡æ–™çµæ§‹ (Debug)",
    "history_hide_raw": "éš±è—åŸå§‹çµæ§‹",
    "history_update_success": "ç´€éŒ„å·²æ›´æ–°",

    // --- Data Manager ---
    "data_mgr_title": "è³‡æ–™ç®¡ç†",
    "data_import_tab": "åŒ¯å…¥è³‡æ–™",
    "data_export_tab": "åŒ¯å‡ºåˆ†äº«",
    "data_import_ph": "è«‹è²¼ä¸Šå…¶ä»–è£ç½®åˆ†äº«çš„ JSON è³‡æ–™ï¼š",
    "data_import_btn": "åŒ¯å…¥è‡³æˆ‘çš„éŠæˆ²åº«",
    "data_export_hint": "é¸æ“‡è¦åŒ¯å‡ºçš„éŠæˆ²ï¼š",
    "data_export_empty": "æ²’æœ‰å¯åŒ¯å‡ºçš„è‡ªè¨‚éŠæˆ²æˆ–ä¿®æ”¹ç´€éŒ„",
    "data_builtin_mod": "å…§å»ºä¿®æ”¹",
    "data_selected_count": "å·²é¸ {count} å€‹",
    "data_select_all": "å…¨é¸",
    "data_deselect_all": "å–æ¶ˆå…¨é¸",
    "data_copy_json": "è¤‡è£½ JSON",
    "data_mail_dev": "æŠ•ç¨¿çµ¦é–‹ç™¼è€…",
    "data_export_footer": "é¸å–çš„éŠæˆ²å°‡è½‰ç‚º JSON æ–‡å­—ï¼Œå¯åˆ†äº«çµ¦æœ‹å‹åŒ¯å…¥ã€‚",
    "data_import_success": "æˆåŠŸåŒ¯å…¥ {count} å€‹éŠæˆ²",
    "data_import_error": "ç„¡æ•ˆçš„ JSON æ ¼å¼",
    "data_error_format": "æ ¼å¼éŒ¯èª¤ï¼š{name} ç¼ºå°‘å¿…è¦æ¬„ä½",
    "data_error_no_data": "æ²’æœ‰å¯åŒ¯å‡ºçš„æœ‰æ•ˆè³‡æ–™",
    "data_error_empty": "ç„¡è³‡æ–™",
    "data_export_fail": "åŒ¯å‡ºå¤±æ•—ï¼Œè«‹é‡è©¦",
    "data_prep_fail": "æº–å‚™è³‡æ–™å¤±æ•—",
    "data_mail_subject": "ã€è¬ç”¨æ¡ŒéŠè¨ˆåˆ†æ¿ã€‘åˆ†äº«éŠæˆ²æ¨¡æ¿ ({date})",
    "data_mail_body": "é–‹ç™¼è€…ä½ å¥½ï¼é€™æ˜¯æˆ‘è£½ä½œçš„è¨ˆåˆ†æ¿\nâ†“â†“â†“ è³‡æ–™å·²è¤‡è£½ï¼Œè«‹åœ¨ä¸‹æ–¹è²¼ä¸Š(Ctrl+V)â†“â†“â†“\n--------------------------------------------------\n\n--------------------------------------------------",

    // --- Template Editor ---
    "tmpl_new_title": "å»ºç«‹æ–°è¨ˆåˆ†æ¿",
    "tmpl_edit_title": "ç·¨è¼¯æ¨¡æ¿",
    "tmpl_name_label": "è¨ˆåˆ†æ¿åç¨±",
    "tmpl_name_ph": "ä¾‹å¦‚ï¼šå¡å¦å³¶ã€ç’€ç’¨å¯¶çŸ³...",
    "tmpl_col_count_label": "è¨ˆåˆ†é …ç›®æ•¸é‡",
    "tmpl_no_total": "(ä¸å«ç¸½åˆ†)",
    "tmpl_simple_mode": "ç°¡æ˜“æ¨¡å¼ï¼šåƒ…é¡¯ç¤ºç©å®¶èˆ‡ç¸½åˆ†ï¼Œé©åˆå–®ç´”è¨˜éŒ„å‹è² ã€‚",
    "tmpl_btn_img": "å»ºç«‹åœ–ç‰‡è¨ˆåˆ†æ¿",
    "tmpl_btn_std": "å»ºç«‹ä¸€èˆ¬è¨ˆåˆ†æ¿",
    "tmpl_hint": "æç¤ºï¼šå»ºç«‹å¾Œï¼Œæ‚¨ä»å¯ä»¥åœ¨è¨ˆåˆ†è¡¨ä¸­é»æ“Šæ¨™é¡Œä¾†ä¿®æ”¹æ‰€æœ‰ç´°ç¯€ã€‚",
    "tmpl_save_warn": "è«‹è¼¸å…¥è¨ˆåˆ†æ¿åç¨±",

    // --- Scanner / Texture Mapper ---
    "scan_title": "çŸ©å½¢æ ¡æ­£",
    "scan_source_title": "è«‹é¸æ“‡åœ–ç‰‡ä¾†æº",
    "scan_btn_camera": "æ‹æ”ç…§ç‰‡",
    "scan_btn_upload": "å¾ç›¸ç°¿ä¸Šå‚³",
    "scan_hint": "æç¤ºï¼šæ‹æ”æ™‚è«‹ç›¡é‡ä¿æŒå…‰ç·šå……è¶³ï¼Œä¸¦å‚ç›´æ‹æ”è¨ˆåˆ†è¡¨ã€‚",
    "scan_drag_hint": "æ‹–æ›³4å€‹é»åˆ°è¨ˆåˆ†ç´™è§’è½",
    "scan_snap_geo": "å¹¾ä½•å¸é™„",
    "scan_snap_line": "ç›´ç·šå¸é™„",
    "scan_snap_free": "è‡ªç”±ç§»å‹•",
    "scan_btn_snap": "å¸é™„",
    "scan_btn_center": "ç½®ä¸­",
    "scan_btn_retake": "é‡æ‹",
    "scan_btn_rotate": "æ—‹è½‰",
    "scan_preview_title": "é è¦½èˆ‡ç¢ºèª",
    "scan_btn_back": "è¿”å›èª¿æ•´",
    "scan_btn_save_img": "å„²å­˜åœ–ç‰‡",
    "mapper_step1": "æ­¥é©Ÿ 1/2 : èª¿æ•´ç¶²æ ¼",
    "mapper_step2": "æ­¥é©Ÿ 2/2 : å®šç¾©çµæ§‹",
    "mapper_step1_desc": "æ‹–æ›³å››é‚Šé‚Šç•Œè£åˆ‡ï¼Œå†å°é½Šå…§éƒ¨ç·šæ¢ã€‚",
    "mapper_step2_desc": "é è¦½é …ç›®åˆ†å‰²ï¼Œæˆ–é»æ“Šã€ŒåŒ¯å…¥è¨­å®šã€å¥—ç”¨è¦å‰‡ã€‚",
    "mapper_drag_desc": "å–®æŒ‡å¹³ç§» â€¢ é›™æŒ‡ç¸®æ”¾ â€¢ æ‹–æ›³ç·šæ¢",
    "mapper_btn_reset": "é‡ç½®è¦–è§’",
    "mapper_btn_add_row": "æ–°å¢æ©«åˆ—",
    "mapper_btn_next": "ä¸‹ä¸€æ­¥",
    "mapper_btn_back_grid": "è¿”å›ç¶²æ ¼",
    "mapper_btn_cancel_import": "å–æ¶ˆåŒ¯å…¥",
    "mapper_btn_import": "åŒ¯å…¥è¨­å®š",
    "mapper_btn_finish": "å®Œæˆ",
    "mapper_import_title": "æœå°‹ç¾æœ‰æ¨¡æ¿...",
    "mapper_import_count": "{count}å€‹é …ç›®",
    "mapper_bound_top": "é ‚éƒ¨é‚Šç•Œ",
    "mapper_bound_bottom": "åº•éƒ¨é‚Šç•Œ",
    "mapper_bound_left": "å·¦é‚Šç•Œ",
    "mapper_bound_right": "å³é‚Šç•Œ",
    "mapper_col_item": "é …ç›®å³é‚Šç•Œ",
    "mapper_col_p1": "é¦–ä½ç©å®¶æ¬„å³é‚Šç•Œ",
    "mapper_struct_name": "ç©å®¶åç¨±",
    "mapper_struct_total": "ç¸½åˆ†åˆè¨ˆ",
    "mapper_struct_empty": "ç©º",
    "mapper_struct_clear": "æ¸…ç©ºæ­¤åˆ—",
    "mapper_success": "æ¨¡æ¿å»ºç«‹æˆåŠŸ",
    "mapper_success_msg": "å·²å¥—ç”¨è¨ˆåˆ†ç´™ç´‹ç†ï¼",

    // --- Install Guide ---
    "install_title": "å®‰è£åˆ°ä¸»ç•«é¢",
    "install_desc": "å°‡æ­¤ç¶²é å®‰è£ç‚º Appï¼Œå¯ç²å¾—æœ€ä½³çš„å…¨è¢å¹•é«”é©—èˆ‡é›¢ç·šåŠŸèƒ½ã€‚è«‹ä¾ç…§æ‚¨çš„è£ç½®é¡å‹æ“ä½œï¼š",
    "install_ios": "iOS (iPhone/iPad)",
    "install_ios_step1": "é»æ“Šç€è¦½å™¨åº•éƒ¨çš„",
    "install_ios_step2": "åœ¨é¸å–®ä¸­å¾€ä¸‹æ»‘ï¼Œæ‰¾åˆ°ä¸¦é»æ“Š",
    "install_ios_step3": "é»æ“Šå³ä¸Šè§’çš„ã€ŒåŠ å…¥ã€å³å¯å®Œæˆã€‚",
    "install_android": "Android (Chrome)",
    "install_android_step1": "é»æ“Šç€è¦½å™¨å³ä¸Šè§’çš„",
    "install_android_step2": "é¸æ“‡",
    "install_android_menu": "é¸å–®",
    "install_android_add": "åŠ åˆ°ä¸»ç•«é¢",
    "install_android_install": "å®‰è£æ‡‰ç”¨ç¨‹å¼",

    // --- Misc ---
    "rotate_device": "è«‹æ—‹è½‰æ‚¨çš„è£ç½®",
    "rotate_device_desc": "æ­¤æ‡‰ç”¨ç¨‹å¼åœ¨æ‰‹æ©Ÿä¸Šåƒ…æ”¯æ´ç›´å¼æ“ä½œï¼Œä»¥ç²å¾—æœ€ä½³é«”é©—ã€‚",
    "error_boundary_title": "ç™¼ç”Ÿäº†ä¸€äº›å•é¡Œ",
    "error_boundary_desc": "æ‡‰ç”¨ç¨‹å¼é‡åˆ°é æœŸå¤–çš„éŒ¯èª¤ã€‚é€™é€šå¸¸æ˜¯å› ç‚ºç€è¦½å™¨ç¿»è­¯æ’ä»¶ç ´å£äº†ç¶²é çµæ§‹ï¼Œè«‹å˜—è©¦é—œé–‰ç¿»è­¯å¾Œé‡æ–°è¼‰å…¥ã€‚",
    "error_boundary_btn": "é‡æ–°è¼‰å…¥æ‡‰ç”¨ç¨‹å¼",
  },
  'en': {
    // --- Common / Generic ---
    "app_name": "Board Game ScorePad",
    "confirm": "Confirm",
    "cancel": "Cancel",
    "delete": "Delete",
    "save": "Save",
    "edit": "Edit",
    "copy": "Copy",
    "download": "Download",
    "share": "Share",
    "close": "Close",
    "back": "Back",
    "reset": "Reset",
    "restore": "Restore",
    "loading": "Loading...",
    "success": "Success",
    "failed": "Failed",
    "warning": "Warning",
    "error": "Error",
    "info": "Info",
    "none": "None",
    "player": "Player",
    "total": "Total",
    "winner": "Winner",
    "search": "Search",
    "filter": "Filter",
    "ok": "OK",
    "understand": "I Understand",

    // --- Dashboard ---
    "dash_search_placeholder": "Search games...",
    "dash_history_search_placeholder": "Search history...",
    "dash_active_sessions": "Active Sessions",
    "dash_clear_all": "Clear All",
    "dash_pinned": "Pinned",
    "dash_my_library": "My Library",
    "dash_builtin_library": "Built-in Library",
    "dash_new_games_found": "Found {count} new games",
    "dash_install_app": "Install App",
    "dash_no_records": "No records found",
    "dash_no_records_hint": "Try searching with different keywords.",
    "dash_no_templates": "No templates created yet",
    "dash_no_search_results": "No matching games found",
    "dash_search_result_count": "Results: {count}",
    "dash_search_result_limit": "Showing recent 100",
    "dash_add_new": "New",
    "dash_import_export": "Manage Data",
    "dash_cloud_sync": "Sync & Backup",
    "dash_disconnect": "Disconnect Drive",

    // --- Confirmations (Dashboard) ---
    "confirm_delete_template_title": "Delete this template?",
    "confirm_delete_template_msg": "This action cannot be undone.",
    "confirm_delete_session_title": "Discard active session?",
    "confirm_delete_session_msg": "You will lose all current progress.",
    "confirm_delete_history_title": "Delete this record?",
    "confirm_clear_all_sessions_title": "Clear all active sessions?",
    "confirm_clear_all_sessions_msg": "All draft progress will be lost permanently.",
    "confirm_clear_all": "Confirm Clear",
    "confirm_restore_title": "Restore Defaults?",
    "confirm_restore_msg": "Current modifications will be backed up to 'My Library', and reset to original settings.",
    "confirm_discard_title": "Discard Game?",
    "confirm_discard_msg": "This will permanently delete this session and all photos. This cannot be undone.",

    // --- Messages (Dashboard) ---
    "msg_json_copied": "JSON Copied",
    "msg_cloud_connect_first": "Please connect to cloud first",
    "msg_read_template_failed": "Failed to read template",
    "msg_copy_created": "Copy created",

    // --- Game Card Actions ---
    "card_resume": "Resume",
    "card_start_new": "Start New",
    "card_delete": "Delete",
    "card_pin": "Pin",
    "card_unpin": "Unpin",
    "card_copy_json": "Copy JSON",
    "card_cloud_backup": "Backup to Cloud",
    "card_backup_hint": "Changes detected! Click to backup to Google Drive",
    "card_create_copy": "Create Copy",
    "card_restore_builtin": "Backup & Restore",
    "card_img_ready": "Background Ready",
    "card_img_missing": "Background Missing",

    // --- Cloud Manager ---
    "cloud_title": "Cloud Backup",
    "cloud_connect_title": "Enable Full Features",
    "cloud_connect_desc": "Connect to Google Drive to unlock cloud sync and auto-backup.",
    "cloud_benefit_1_title": "Auto Cloud Backup",
    "cloud_benefit_1_desc": "Never lose your score records and custom templates.",
    "cloud_benefit_2_title": "Cross-Device Sync",
    "cloud_benefit_2_desc": "Seamlessly switch between phone, tablet, and PC.",
    "cloud_benefit_3_title": "Private App Folder",
    "cloud_benefit_3_desc": "Only access files created by this App to protect privacy.",
    "cloud_btn_connect": "Connect Now",
    "cloud_tab_templates": "Library",
    "cloud_tab_active": "Active",
    "cloud_tab_history": "History",
    "cloud_tab_files": "Cloud Files",
    "cloud_tab_trash": "Trash",
    "cloud_empty_trash": "Empty Trash",
    "cloud_empty_list": "No backup files found",
    "cloud_empty_trash_list": "Trash is empty",
    "cloud_download_restore": "Download & Restore",
    "cloud_restore": "Restore",
    "cloud_delete_perm": "Delete Permanently",
    "cloud_confirm_delete_title": "Delete Permanently?",
    "cloud_confirm_delete_msg": "Are you sure you want to delete \"{name}\"? This cannot be undone.",
    "cloud_confirm_empty_title": "Empty Trash?",
    "cloud_confirm_empty_msg": "Are you sure you want to delete all files in trash? This cannot be undone.",
    "cloud_confirm_logout_title": "Disconnect Drive?",
    "cloud_confirm_logout_msg": "Auto-backup will stop after disconnecting. Your files will remain in the cloud.",

    // --- Sync Dashboard ---
    "sync_title": "Sync Center",
    "sync_backup_title": "Backup to Cloud",
    "sync_backup_desc": "Upload local data to Google Drive",
    "sync_restore_title": "Restore from Cloud",
    "sync_restore_desc": "Download data from Google Drive to this device",
    "sync_btn_upload": "Start Upload",
    "sync_btn_download": "Start Download",
    "sync_status_processing": "Processing...",
    "sync_status_success": "Success",
    "sync_status_skipped": "Skipped (Up to date)",
    "sync_status_failed": "Failed",
    "sync_error_details": "Error Details",
    "sync_msg_limit": "Cloud keeps the latest 20 active sessions. Older ones are auto-deleted.",
    "sync_msg_newer": "Skipped if cloud version is newer.",
    "sync_msg_restore_warn": "This will overwrite local data with cloud data. Active sessions are NOT included (download them manually from Cloud Backup Manager if needed).",

    // --- Game Setup Modal ---
    "setup_last_played": "Last Played:",
    "setup_resume_btn": "Resume\nGame",
    "setup_or_new": "OR Start New Game",
    "setup_time": "Start Time",
    "setup_rule": "Win Condition",
    "setup_players": "Players",
    "setup_reset_record": "Reset Record",
    "setup_and": "and",
    "setup_start_btn": "Start Scoring",
    "rule_highest": "Competitive: Highest Wins",
    "rule_lowest": "Competitive: Lowest Wins",
    "rule_coop": "Co-op Mode",
    "rule_comp_no_score": "Competitive (No Win/Loss)",
    "rule_coop_no_score": "Co-op (No Win/Loss)",

    // --- Session View ---
    "session_edit_title_placeholder": "Enter Title",
    "session_lock_edit": "Lock Edit (Switch to Play Mode)",
    "session_unlock_edit": "Unlock Edit (Switch to Edit Mode)",
    "session_download_bg": "Download Background",
    "session_reset_confirm_title": "Confirm Reset?",
    "session_reset_confirm_msg": "This will clear all entered scores. This action cannot be undone.",
    "session_delete_col_title": "Delete this Item?",
    "session_delete_col_msg": "All player scores for this item will be lost.",
    "session_upload_modal_title": "Set Score Sheet Background",
    "session_upload_modal_desc": "This template includes layout coordinates.",
    "session_upload_modal_cloud_btn": "Download from Cloud",
    "session_upload_modal_connect_btn": "Connect & Download",
    "session_upload_modal_camera": "Take New Photo",
    "session_upload_modal_gallery": "Upload from Gallery",
    "session_upload_modal_remove": "Remove Background & Revert to Standard",
    "session_exit_title": "Return to Menu",
    "session_exit_msg": "Is the game finished?",
    "session_btn_draft": "Save Draft (Play Later)",
    "session_btn_finish": "Finish Game (Save History)",
    "session_discard": "Discard",

    // --- Input Panel ---
    "input_edit_player": "Edit Player",
    "input_total_adjust": "Total Adjustment",
    "input_clear": "Clear",
    "input_reset": "Reset",
    "input_next": "Next",
    "input_tie_breaker": "Tie Breaker",
    "input_force_loss": "Force Loss",
    "input_auto_calc": "Auto Calc",
    "input_auto_desc": "This field is calculated automatically. No manual input required.",
    "input_list_menu": "List Menu",
    "input_calc_mode": "Calculator",
    "input_rounding": "Rounding",
    "input_not_scored": "Not included in total",
    "input_prod_title": "Product Input",
    "input_sum_title": "Sum Parts",
    "input_lookup_title": "Lookup Table",
    "input_fixed_score": "Fixed Score",
    "input_no_rule": "No Rule",
    "input_btn_enter": "Enter",

    // --- Player Editor ---
    "player_placeholder": "Enter Name",
    "player_color": "Color",
    "player_no_color": "None",
    "player_history": "History",
    "player_no_history": "No history",
    "player_set_starter": "Set Starter",
    "player_is_starter": "Starter",

    // --- Column Config Editor ---
    "col_edit_title": "Edit Item",
    "col_edit_subtitle": "Configure Scoring Rules",
    "col_name": "Name",
    "col_advanced": "Advanced",
    "col_help_default": "Tap buttons above to see details",
    "col_help_scoring_on": "On: Value included in total score",
    "col_help_scoring_off": "Off: Value recorded but not summed",
    "col_help_display": "Switch: Standard Row / Overlay",
    "col_help_crop": "Set display area on background image",
    "col_scoring_on": "Scoring",
    "col_scoring_off": "No Score",
    "col_crop": "Crop Area",
    "col_cropped": "Cropped",
    "col_display_row": "Row",
    "col_display_overlay": "Overlay",
    "col_color": "Color",
    "col_btn_save": "Save Changes",
    "col_tab_basic": "Basic",
    "col_tab_select": "List",
    "col_tab_mapping": "Mapping",
    "col_tab_auto": "Auto",
    
    // Tab Basic
    "col_mode_std": "Number / Multiplier",
    "col_mode_std_desc": "Unit Ã— Constant",
    "col_mode_prod": "Product",
    "col_mode_prod_desc": "A Ã— B",
    "col_unit": "Unit",
    "col_input_val": "Input",
    "col_score": "Score",
    "col_prod_unit_title": "Product Units",
    "col_prod_unit_a": "Unit A",
    "col_prod_unit_b": "Unit B",
    "col_sum_parts": "Enable Sum Parts",
    "col_rounding_enable": "Enable Rounding",
    "col_round_floor": "Floor",
    "col_round_ceil": "Ceil",
    "col_round_round": "Round",
    "col_display_in_grid": "Grid Display",
    "col_display_std": "Standard",
    "col_display_total": "Total Only",
    "col_display_parts": "Parts Only",
    "col_input_method": "Input Method",
    "col_use_pad": "Use Button Pad",
    
    // Tab Select (Quick Actions)
    "col_render_mode": "Display Mode",
    "col_render_std": "Standard",
    "col_render_val": "Value Only",
    "col_render_label": "Label Only",
    "col_select_desc": "Create a fixed list of options mapping to scores.",
    "col_buttons": "Buttons",
    "col_btn_cols": "Grid Columns",
    "col_btn_add": "Add Button",
    "col_btn_mode_list_hint": "List Mode: Buttons arranged horizontally.",
    "col_btn_mode_grid_hint": "Grid Mode: Buttons stacked vertically.",
    "col_btn_modifier_hint": "Toggle additive modifier key",
    "col_btn_color_hint": "Set button color",
    "col_btn_label_ph": "Label",
    "col_btn_reset_color": "Reset color",

    // Tab Mapping
    "col_mapping_desc": "Set score ranges or linear progression.",
    "col_mapping_min": "Min",
    "col_mapping_max": "Max",
    "col_mapping_next": "NEXT",
    "col_mapping_mode_linear": "Mode: Linear (Per A add B)",
    "col_mapping_mode_fixed": "Mode: Fixed Score",
    "col_mapping_lock_hint": "First rule must be a fixed score (base).",
    "col_mapping_per": "Per",
    "col_mapping_add": "Add",
    "col_mapping_val": "Val",
    "col_add_interval": "Add Interval",

    // Tab Auto
    "col_auto_title": "Advanced Formula",
    "col_auto_desc": "Use x1, x2... for source columns, f1(...), f2(...) for lookup tables.",
    "col_auto_formula": "Formula",
    "col_auto_vars": "Variables",
    "col_auto_player_count": "ğŸ‘¥ Player Count",
    "col_auto_score_items": "Score Items",
    "col_auto_mode": "Value Mode",
    "col_auto_mode_val": "Value (Default)",
    "col_auto_mode_rank_score": "Score Rank",
    "col_auto_mode_rank_player": "Player Rank",
    "col_auto_mode_tie": "Tie Count",
    "col_auto_rank_score_desc": "Dense Rank (1,1,2)",
    "col_auto_rank_player_desc": "Standard Rank (1,1,3)",
    "col_auto_tie_desc": "Count of tied players",
    "col_auto_funcs": "Functions",
    "col_auto_no_vars": "No variables in formula",
    "col_auto_no_funcs": "No functions used (e.g. f1, f2)",
    "col_auto_rules_count": "Rules",
    "col_auto_err_empty": "Please enter a formula",
    "col_auto_err_invalid_char": "Invalid characters",
    "col_auto_err_invalid_result": "Invalid result",
    "col_auto_err_syntax": "Syntax error, check symbols and parentheses",

    // Layout Editor
    "layout_editor_title": "Set Display Area",
    "layout_editor_desc": "Draw a box below to set the score display area",
    "layout_editor_hint": "(Defaults to center if not set)",

    // --- Share Menu ---
    "share_screenshot": "Screenshot",
    "share_gallery": "Photo Gallery",
    "share_photo_count": "{count} Photos",
    "share_set_bg": "Set Background",

    // --- Screenshot Modal ---
    "ss_title": "Share Result",
    "ss_full": "Full",
    "ss_simple": "Simple",
    "ss_generating": "Generating...",
    "ss_copy": "Copy",
    "ss_download": "Download",
    "ss_share": "Share",
    "ss_copy_success": "Copied to clipboard",
    "ss_download_start": "Download started",
    "ss_share_fail": "Direct share not supported",

    // --- Photo Gallery ---
    "gallery_title": "Game Photos",
    "gallery_upload": "Upload",
    "gallery_camera": "Camera",
    "gallery_loading": "Loading...",
    "gallery_empty": "No Photos",
    "gallery_empty_hint": "Capture the moments!",
    "gallery_delete_confirm_title": "Delete Photo?",
    "gallery_delete_confirm_msg": "Are you sure? This cannot be undone.",
    "gallery_generating_overlay": "Generating Overlay...",
    "gallery_toggle_score": "Show Score",
    "gallery_hide_score": "Hide Score",

    // --- History Review ---
    "history_review_subtitle": "Review",
    "history_edit_info": "Edit Info",
    "history_share_photo": "Share/Photos",
    "history_settings_title": "Record Details",
    "history_game_name": "Game Name",
    "history_start_time": "Start Time",
    "history_end_time": "End Time",
    "history_location": "Location",
    "history_location_ph": "e.g. Home, Cafe...",
    "history_rule": "Mode",
    "history_rule_warn": "* Changing this won't re-calculate winners automatically.",
    "history_note": "Note",
    "history_note_ph": "Write something about the game...",
    "history_raw_data": "View Raw Data (Debug)",
    "history_hide_raw": "Hide Raw Data",
    "history_update_success": "Record Updated",

    // --- Data Manager ---
    "data_mgr_title": "Data Manager",
    "data_import_tab": "Import",
    "data_export_tab": "Export",
    "data_import_ph": "Paste JSON data here:",
    "data_import_btn": "Import to Library",
    "data_export_hint": "Select games to export:",
    "data_export_empty": "No custom games found",
    "data_builtin_mod": "Built-in Mod",
    "data_selected_count": "{count} selected",
    "data_select_all": "Select All",
    "data_deselect_all": "Deselect All",
    "data_copy_json": "Copy JSON",
    "data_mail_dev": "Send to Dev",
    "data_export_footer": "Selected games will be converted to JSON text.",
    "data_import_success": "Imported {count} games",
    "data_import_error": "Invalid JSON format",
    "data_error_format": "Format Error: {name} is missing fields",
    "data_error_no_data": "No valid data to import",
    "data_error_empty": "No data",
    "data_export_fail": "Export failed, please retry",
    "data_prep_fail": "Failed to prepare data",
    "data_mail_subject": "[ScorePad] Share Templates ({date})",
    "data_mail_body": "Hi Dev! Here are my custom templates\nâ†“â†“â†“ Data Copied Below (Ctrl+V) â†“â†“â†“\n--------------------------------------------------\n\n--------------------------------------------------",

    // --- Template Editor ---
    "tmpl_new_title": "New Score Sheet",
    "tmpl_edit_title": "Edit Template",
    "tmpl_name_label": "Board Name",
    "tmpl_name_ph": "e.g. Catan, Splendor...",
    "tmpl_col_count_label": "Item Count",
    "tmpl_no_total": "(Excl. Total)",
    "tmpl_simple_mode": "Simple Mode: Only show Players and Total Score.",
    "tmpl_btn_img": "Create from Image",
    "tmpl_btn_std": "Create Standard",
    "tmpl_hint": "Tip: You can edit details later by clicking headers in the sheet.",
    "tmpl_save_warn": "Please enter a name",

    // --- Scanner / Texture Mapper ---
    "scan_title": "Rectify Image",
    "scan_source_title": "Select Image Source",
    "scan_btn_camera": "Take Photo",
    "scan_btn_upload": "Upload Image",
    "scan_hint": "Tip: Ensure good lighting and take photos from top-down view.",
    "scan_drag_hint": "Drag 4 corners to the sheet",
    "scan_snap_geo": "Geo Snap",
    "scan_snap_line": "Line Snap",
    "scan_snap_free": "Free Move",
    "scan_btn_snap": "Snap",
    "scan_btn_center": "Center",
    "scan_btn_retake": "Retake",
    "scan_btn_rotate": "Rotate",
    "scan_preview_title": "Preview & Confirm",
    "scan_btn_back": "Back",
    "scan_btn_save_img": "Save Image",
    "mapper_step1": "Step 1/2: Grid",
    "mapper_step2": "Step 2/2: Structure",
    "mapper_step1_desc": "Crop boundaries, then align internal lines.",
    "mapper_step2_desc": "Preview split items, or import settings.",
    "mapper_drag_desc": "1-Finger Pan â€¢ 2-Finger Zoom â€¢ Drag Lines",
    "mapper_btn_reset": "Reset View",
    "mapper_btn_add_row": "Add Row",
    "mapper_btn_next": "Next",
    "mapper_btn_back_grid": "Back to Grid",
    "mapper_btn_cancel_import": "Cancel Import",
    "mapper_btn_import": "Import Settings",
    "mapper_btn_finish": "Finish",
    "mapper_import_title": "Search Templates...",
    "mapper_import_count": "{count} items",
    "mapper_bound_top": "Top",
    "mapper_bound_bottom": "Bottom",
    "mapper_bound_left": "Left",
    "mapper_bound_right": "Right",
    "mapper_col_item": "Item Col Right",
    "mapper_col_p1": "P1 Col Right",
    "mapper_struct_name": "PLAYER NAMES",
    "mapper_struct_total": "TOTAL SCORE",
    "mapper_struct_empty": "Empty",
    "mapper_struct_clear": "Clear Row",
    "mapper_success": "Template Created",
    "mapper_success_msg": "Texture applied successfully!",

    // --- Install Guide ---
    "install_title": "Install App",
    "install_desc": "Install to home screen for fullscreen experience and offline support.",
    "install_ios": "iOS (iPhone/iPad)",
    "install_ios_step1": "Tap the Share button",
    "install_ios_step2": "Scroll down and tap",
    "install_ios_step3": "Tap 'Add' at the top right.",
    "install_android": "Android (Chrome)",
    "install_android_step1": "Tap the Menu icon",
    "install_android_step2": "Select",
    "install_android_menu": "Menu",
    "install_android_add": "Add to Home Screen",
    "install_android_install": "Install App",

    // --- Misc ---
    "rotate_device": "Please Rotate Device",
    "rotate_device_desc": "This app is optimized for portrait mode on mobile.",
    "error_boundary_title": "Something went wrong",
    "error_boundary_desc": "An unexpected error occurred. This is often caused by browser translation plugins. Please disable translation and reload.",
    "error_boundary_btn": "Reload App",
  }
};

// --- 2. å‹åˆ¥å®šç¾© ---
export type Language = 'zh-TW' | 'en';
type TranslationKey = keyof typeof resources['zh-TW'];

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: TranslationKey, params?: Record<string, string | number>) => string;
}

// --- 3. Context & Provider ---
const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  // å„ªå…ˆè®€å– LocalStorageï¼Œå¦å‰‡åµæ¸¬ç€è¦½å™¨èªè¨€ï¼Œé è¨­ zh-TW
  const [language, setLanguageState] = useState<Language>(() => {
    const saved = localStorage.getItem('app_language');
    if (saved === 'en' || saved === 'zh-TW') return saved;
    const browserLang = navigator.language;
    return browserLang.startsWith('zh') ? 'zh-TW' : 'en';
  });

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
    localStorage.setItem('app_language', lang);
  };

  // ç¿»è­¯å‡½æ•¸
  const t = (key: TranslationKey, params?: Record<string, string | number>): string => {
    let text = resources[language][key] || resources['zh-TW'][key] || key;
    
    // ç°¡å–®çš„åƒæ•¸æ›¿æ›é‚è¼¯ {count} -> 5
    if (params) {
      Object.entries(params).forEach(([k, v]) => {
        text = text.replace(`{${k}}`, String(v));
      });
    }
    return text;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

// --- 4. Custom Hook ---
export const useTranslation = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useTranslation must be used within a LanguageProvider');
  }
  return context;
};
