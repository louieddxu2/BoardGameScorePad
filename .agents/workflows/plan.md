---
description: 建立技術實作規劃 (Implementation Plan) 的標準作業程序，確保所有提案皆使用繁體中文且符合架構規範。
---
# 實作規劃 (/plan) SOP

當使用者輸入 `/plan` 或需要進行技術決策時，必須遵循以下步驟建立或更新 `implementation_plan.md`。

## ⚠️ 核心原則
1. **強制使用繁體中文**：所有內容說明、建議、分析皆須使用繁體中文 (zh-TW)，嚴禁輸出英文版規劃。
2. **拒絕「髒髒」解法**：不考慮單純「遮蓋」問題或治標不治本的行為（如：全域攔截錯誤、靜默失敗）。應優先尋找問題根源或提出架構性的防護方案。
3. **麻瓜友善與專業並存**：說明應深入淺出，讓使用者理解「為什麼要這樣改」。

## 執行步驟

### 第一步：環境與現況分析 (Analysis)
- 列出受影響的模組、檔案與目前的依賴鏈。
- 分析問題的根本原因 (Root Cause)，而非表面現象。

### 第二步：編寫規劃文件 (Writing Plan)
使用 `write_to_file` 或 `replace_file_content` 在 `brain/<conversation-id>/implementation_plan.md` 建立/更新文件，格式如下（請確保為 Markdown）：

```markdown
# [功能/問題名稱]

## 問題背景與核心目標
簡單描述問題現狀，以及這次修改要達成的具體結果。

## 方案權衡 (Proposals)
如果有多個解決方式，請列點比較優劣，並主動推薦其中一個。

## 具體變更計畫
依據檔案或模組分群，列出具體修改內容：
- **[MODIFY] [檔案名稱]**：描述修改邏輯。
- **[NEW] [檔案名稱]**：描述新增原因。

## 驗證計畫
列出如何測試此修改，包含自動化測試指令與手動操作路徑。
```

### 第三步：提交評閱 (Notify User)
- 使用 `notify_user` 工具，並將 `implementation_plan.md` 的路徑放入 `PathsToReview`。
- 在 `Message` 中簡短提示即可，重點在於讓使用者看檔案內容。
