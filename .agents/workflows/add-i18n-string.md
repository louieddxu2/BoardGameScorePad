---
description: æ–°å¢ i18n é›™èªå­—ä¸²çš„æ¨™æº–ä½œæ¥­æµç¨‹ (SOP)
---

# æ–°å¢ i18n é›™èªå­—ä¸² SOP

æœ¬å°ˆæ¡ˆä½¿ç”¨**è‡ªè¨‚ i18n ç³»çµ±**ï¼Œæ‰€æœ‰ç¿»è­¯å­—ä¸²å­˜æ”¾æ–¼ `src/i18n/` ç›®éŒ„ä¸‹çš„æ¨¡çµ„åŒ–å­—å…¸æª”ã€‚
ç¦æ­¢åœ¨å­—å…¸æª”ä»¥å¤–çš„ .tsx / .ts æª”æ¡ˆä¸­ä½¿ç”¨ç¡¬ç·¨ç¢¼ä¸­æ–‡å­—ä¸²ã€‚

---

## æ­¥é©Ÿé›¶ï¼šå¾ docs/i18n-todo.md é¸å®šç›®æ¨™

> **æ¯æ¬¡ i18n ä»»å‹™é–‹å§‹å‰å¿…è®€**ï¼Œé¿å…é‡è¤‡æƒææµªè²» tokenã€‚

1. æ‰“é–‹ [`docs/i18n-todo.md`](../../docs/i18n-todo.md)
2. é¸æ“‡å„ªå…ˆé †åºæœ€é«˜çš„ ğŸ”² é …ç›®
3. ç¢ºèªã€Œå°æ‡‰å­—å…¸ã€æ¬„ä½ï¼ˆæ­¥é©Ÿä¸€å°±èƒ½è·³éï¼‰

ä»»å‹™çµæŸæ™‚ï¼Œå°‡è©²åˆ—ç‹€æ…‹æ”¹ç‚º âœ… ä¸¦æ›´æ–°ã€Œå·²å®Œæˆã€å€å¡Šã€‚

---

## æ­¥é©Ÿä¸€ï¼šç¢ºèªå±¬æ–¼å“ªå€‹å­—å…¸æ¨¡çµ„ï¼ˆè‹¥ i18n-todo.md å·²æ¨™æ˜å‰‡å¯è·³éï¼‰


| å­—ä¸²é¡å‹ | å°æ‡‰å­—å…¸æª” | Hook |
|---------|-----------|------|
| å„€è¡¨æ¿ï¼ˆéŠæˆ²åº«ã€æ­·å²æ¸…å–®ï¼‰ | `src/i18n/dashboard.ts` | `useDashboardTranslation()` |
| éŠæˆ²é€²è¡Œä¸­è¨ˆåˆ†ç•«é¢ | `src/i18n/session.ts` | `useSessionTranslation()` |
| å·¥å…·ç®±ï¼ˆç¢¼è¡¨ã€åˆ†éšŠç­‰ï¼‰ | `src/i18n/tools.ts` | `useToolsTranslation()` |
| BGG / BGStats æ•´åˆä»‹é¢ | `src/i18n/integration.ts` | `useIntegrationTranslation()` |
| é›²ç«¯åŒæ­¥ | `src/i18n/cloud.ts` | `useCloudTranslation()` |
| éŠæˆ²æµç¨‹ï¼ˆé–‹å§‹ã€è¨­å®šï¼‰ | `src/i18n/game_flow.ts` | `useGameFlowTranslation()` |
| App å±¤ç´šï¼ˆå®‰è£å¼•å°ï¼‰ | `src/i18n/app.ts` | `useAppTranslation()` |
| å…±ç”¨ï¼ˆç¢ºèªã€å–æ¶ˆç­‰ï¼‰ | `src/i18n/common.ts` | `useCommonTranslation()` |

---

## æ­¥é©ŸäºŒï¼šåœ¨å­—å…¸æª”ä¸­æ–°å¢å­—ä¸²ï¼ˆzh-TW å’Œ en å¿…é ˆåŒæ­¥ï¼‰

åœ¨å°æ‡‰çš„ `src/i18n/[module].ts` è£¡ï¼ŒåŒæ™‚åŠ å…¥å…©ç¨®èªè¨€ï¼š

```typescript
// âŒ éŒ¯èª¤ï¼šåªåŠ ä¸­æ–‡
zh-TW: { my_key: "æˆ‘çš„æ–‡å­—" }

// âœ… æ­£ç¢ºï¼šä¸­è‹±æ–‡åŒæ­¥
'zh-TW': { my_key: "æˆ‘çš„æ–‡å­—" },
'en':    { my_key: "My Text" },
```

---

## æ­¥é©Ÿä¸‰ï¼šåœ¨å…ƒä»¶ä¸­ä½¿ç”¨ Hook

```tsx
// 1. åŒ¯å…¥ hookï¼ˆæ³¨æ„ï¼šå¾å°æ‡‰çš„å­—å…¸æª”åŒ¯å…¥ï¼Œä¸æ˜¯å¾ '../i18n' ç›´æ¥åŒ¯å…¥ï¼‰
import { useIntegrationTranslation } from '../../../i18n/integration';

// 2. åœ¨å…ƒä»¶å…§åˆå§‹åŒ–
const { t } = useIntegrationTranslation();

// 3. ä½¿ç”¨
<button>{t('my_key')}</button>

// æœ‰åƒæ•¸çš„æƒ…æ³
<span>{t('my_key_with_param', { count: 5 })}</span>
// å°æ‡‰å­—å…¸ï¼šmy_key_with_param: "å…± {count} ç­†"
```

---

## æ­¥é©Ÿå››ï¼šé©—è­‰ï¼ˆæ¯æ¬¡ i18n ä¿®æ”¹å¾Œå¿…è·‘ï¼‰

```powershell
# 1. æƒææ˜¯å¦æœ‰æ®˜ç•™çš„ç¡¬ç·¨ç¢¼ä¸­æ–‡
.\scripts\scan-hardcoded-chinese.ps1

# 2. TypeScript å‹åˆ¥æª¢æŸ¥ï¼ˆç¢ºä¿å­—ä¸² key æ‹¼å¯«æ­£ç¢ºï¼‰
npx tsc --noEmit
```

å…©è€…çš†å›å ±æˆåŠŸå¾Œï¼Œæ‰å¯ commitã€‚

---

## âš ï¸ å¸¸è¦‹éŒ¯èª¤

1. **å¿˜è¨˜åœ¨ `en` å€æ®µåŠ å­—ä¸²** â†’ `tsc` ä¸æœƒå ±éŒ¯ï¼Œä½†åˆ‡æ›åˆ°è‹±æ–‡æ™‚ key åç¨±æœƒç›´æ¥é¡¯ç¤º
2. **å¾ `../i18n` æˆ– `../../i18n` ç›´æ¥ import** â†’ Vite å¯èƒ½è§£æéŒ¯èª¤ï¼Œæ‡‰å¾ `./index` æˆ–å°æ‡‰å­—å…¸æª”åŒ¯å…¥
3. **æ–°å¢å­—ä¸²å¾Œæœªé‡å•Ÿ dev server** â†’ è‹¥ Vite HMR ç•°å¸¸ï¼Œå¯èƒ½éœ€è¦ `Ctrl+C` å¾Œé‡æ–° `npm run dev`

## ğŸš« çµ•å°ç¦æ­¢

4. **åœ¨ ErrorBoundary ç­‰å®‰å…¨ç¶²å…ƒä»¶ä½¿ç”¨ `useXxxTranslation()` hook** â†’ é€™äº›å…ƒä»¶æ˜¯ React æœ€å¾Œé˜²ç·šï¼Œè‹¥å®ƒå€‘ä¾è³´çš„ Context Provider å‡ºå•é¡Œï¼Œæ•´å€‹ App ç™½ç•«é¢ã€‚å®‰å…¨ç¶²å…ƒä»¶æ‡‰ä½¿ç”¨ç¡¬ç·¨ç¢¼é›™èªå­—ä¸² + `localStorage.getItem('app_language')` ç›´æ¥åˆ¤æ–·èªè¨€ã€‚
5. **åœ¨ `index.html` ä¸­æ–°å¢é¡å¤–çš„ `<script type="module" src="...index.tsx">` æˆ– `<script type="importmap">`** â†’ æœƒå°è‡´ Vite å»ºç«‹å¤šå€‹æ¨¡çµ„å¯¦é«”ï¼ŒReact Context å¯¦ä¾‹åˆ†è£‚ï¼Œé€ æˆ Provider èˆ‡ Consumer æ–·è£‚ã€‚`index.html` çš„ script å…¥å£**æ°¸é åªèƒ½æœ‰ä¸€å€‹**ã€‚
